<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="http://xmlns.jcp.org/xml/ns/persistence/orm"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence/orm_2_2.xsd" version="2.2">

    <entity class="co.edu.icesi.viajes.domain.Cliente">
        <named-native-query name="Cliente.consultarClientesPorNombre" result-set-mapping="Cliente.consultarClientesPorNombre">
            <query>
                SELECT numero_identificacion,primer_apellido,segundo_apellido,nombre,estado,id_tiid
                FROM cliente c
                WHERE c.nombre LIKE :pNombre
                ORDER BY nombre ASC
            </query>
        </named-native-query>
        <named-native-query name="Cliente.consultarPorTipoID" result-set-mapping="Cliente.consultarPorTipoID">
            <query>
                Select c.id_clie, c.numero_identificacion, c.nombre AS nombreClie, c.primer_apellido , td.nombre as nombreID
                From cliente c
                JOIN tipo_identificacion td on c.id_tiid = td.id_tiid
                Where codigo = :pCodigo
            </query>
        </named-native-query>
        <named-native-query name="Cliente.consultarPlanYDetallePlan" result-set-mapping="Cliente.consultarPlanYDetallePlan">
            <query>
                SELECT c.nombre AS cliente_nombre, dp.alimentacion, dp.hospedaje, dp.transporte, p.codigo AS plan_codigo, p.descripcion_solicitud AS plan_descripcion
                FROM cliente c
                JOIN plan p ON c.id_clie = p.id_clie
                JOIN detalle_plan dp ON p.id_plan = dp.id_plan
                WHERE c.nombre = :pNombre
                ORDER BY c.nombre, p.fecha_solicitud DESC
            </query>
        </named-native-query>
    </entity>

    <entity class="co.edu.icesi.viajes.domain.Destino">
        <named-native-query name="Destino.consultaDestinosPorTipoDestin" result-set-mapping="Destino.consultaDestinosPorTipoDestin">
            <query>
                SELECT d.nombre AS nombreDestin,
                d.descripcion
                FROM tipo_destino td
                JOIN destino d
                ON td.id_tide = d.id_tide
                WHERE td.nombre= :pNombre
            </query>
        </named-native-query>
    </entity>

    <entity class="co.edu.icesi.viajes.domain.Permiso">
        <named-native-query name="Permiso.consultaPermisoPorRol" result-set-mapping="Permiso.consultaPermisoPorRol">
            <query>
                SELECT p.nombre
                FROM permiso p
                JOIN rol r ON p.id_rol = r.id_rol
                WHERE r.nombre = :pNombre
            </query>
        </named-native-query>
    </entity>

    <entity class="co.edu.icesi.viajes.domain.DetallePlan">

    </entity>

    <entity class="co.edu.icesi.viajes.domain.Plan">

    </entity>

    <entity class="co.edu.icesi.viajes.domain.TipoDestino">

    </entity>

    <entity class="co.edu.icesi.viajes.domain.TipoIdentificacion">

    </entity>

    <entity class="co.edu.icesi.viajes.domain.Usuario">
        <named-native-query name="Usuario.consultarNombreRolPorId" result-set-mapping="Usuario.consultarNombreRolPorId">
            <query>
                SELECT r.nombre FROM usuario us
                JOIN rol r
                ON us.id_rol=r.id_rol
                WHERE r.id_rol = :pIdRol
                LIMIT 1
            </query>
        </named-native-query>
    </entity>

</entity-mappings>
